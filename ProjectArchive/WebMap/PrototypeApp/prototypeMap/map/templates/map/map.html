<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype Map</title>

    <link 
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script 
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
    </script>

    <style>
        #map {
            height: 650px;
            width: 80%;
            margin-top: 20px;
            border: 2px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Accent Map Prototype</h1>

    <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add Marker</button>
    </form>

    <div id="map"></div>

    <script>
        //show ireland
        var map = L.map('map').setView([53.4, -8.2], 7)

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
            maxZoom: 19,
        }).addTo(map);

        var points = [
            {% for p in points %}
                {
                    lat: {{ p.location.y }},
                    lon: {{ p.location.x}},
                },
            {% endfor %}
        ];

        points.forEach(p => {
            L.marker([p.lat, p.lon])
                .addTo(map)
                .bindPopup("Placeholder: Accent prediction will show as these")
        });
    </script>
</body>
</html>